(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,64247,e=>{"use strict";var t=e.i(43476),a=e.i(71645),l=e.i(59141);e.i(36180);var s=e.i(98925);function n(){let[e,n]=(0,a.useState)([]),[i,o]=(0,a.useState)(null),[c,d]=(0,a.useState)(""),[r,h]=(0,a.useState)(null),[x,m]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(0,s.getDocs)((0,s.collection)(l.db,"wordSets")).then(e=>{n(e.docs.map(e=>({id:e.id,...e.data()})))})},[]);let u=(e,t=1)=>{let a=new SpeechSynthesisUtterance(e);a.rate=t,a.lang="en-US",speechSynthesis.speak(a)},b=async e=>{d(e),h(null),m(!0);try{let t=await navigator.mediaDevices.getUserMedia({audio:!0}),a=new MediaRecorder(t),l=[];a.ondataavailable=e=>l.push(e.data),a.onstop=async()=>{let a=new Blob(l,{type:"audio/webm"}),s=new FormData;s.append("file",a,"audio.webm");let n=await fetch("https://api-inference.huggingface.co/models/openai/whisper-large-v3-turbo",{method:"POST",headers:{Authorization:"Bearer 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"},body:s}),i=await n.json(),o=(i?.text||"").trim().toLowerCase(),c=e.toLowerCase(),d=o.includes(c)?85+15*Math.random():30+40*Math.random();h(Math.round(d)),m(!1),t.getTracks().forEach(e=>e.stop())},a.start(),setTimeout(()=>a.stop(),5e3)}catch{alert("Vui lòng cho phép micro!"),m(!1)}};return i?(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-indigo-500 to-pink-500 p-6",children:[(0,t.jsx)("button",{onClick:()=>o(null),className:"text-white mb-6",children:"← Quay lại danh sách"}),(0,t.jsx)("h1",{className:"text-5xl font-bold text-white text-center mb-8",children:i.name}),(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 max-w-6xl mx-auto",children:i.words.map((e,a)=>(0,t.jsxs)("div",{className:"bg-white rounded-3xl p-6 shadow-2xl text-center",children:[(0,t.jsx)("h3",{className:"text-3xl font-bold mb-4",children:e}),(0,t.jsxs)("div",{className:"flex justify-center gap-3 mb-4",children:[(0,t.jsx)("button",{onClick:()=>u(e,.6),className:"bg-gray-500 text-white px-4 py-2 rounded",children:"Chậm"}),(0,t.jsx)("button",{onClick:()=>u(e,1),className:"bg-blue-500 text-white px-4 py-2 rounded",children:"Nhanh"})]}),(0,t.jsx)("button",{onClick:()=>b(e),disabled:x,className:"w-full bg-red-500 hover:bg-red-600 text-white py-4 rounded-xl text-xl font-bold",children:x&&c===e?"Đang chấm...":"Thu âm"}),null!==r&&c===e&&(0,t.jsxs)("p",{className:`mt-4 text-4xl font-bold ${r>=80?"text-green-600":r>=60?"text-yellow-600":"text-red-600"}`,children:[r,"/100"]})]},a))})]}):(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-indigo-500 to-pink-500 p-6",children:[(0,t.jsx)("button",{onClick:()=>window.location.href="/out/",className:"text-white mb-4",children:"← Quay lại trang chủ"}),(0,t.jsx)("h1",{className:"text-5xl font-bold text-white text-center mb-10",children:"Chọn bộ từ"}),(0,t.jsx)("div",{className:"max-w-2xl mx-auto space-y-6",children:0===e.length?(0,t.jsx)("p",{className:"text-white text-2xl text-center",children:"Chưa có bộ từ nào"}):e.map(e=>(0,t.jsxs)("button",{onClick:()=>o(e),className:"block w-full bg-white p-8 rounded-3xl shadow-2xl text-2xl font-bold hover:scale-105 transition",children:[e.name," (",e.words.length," từ)"]},e.id))})]})}e.s(["default",()=>n])}]);